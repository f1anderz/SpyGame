import{_ as D,o as i,c as l,a as n,i as x,t as w,g as y,b as v,w as B,F as G,k as C,T as U,f as z,r as d,n as j,q as E,s as S,p as b,h as M,d as H,v as O,S as A,u as T,j as L,l as K,e as I}from"./index-Csm-pvft.js";import{S as N}from"./SpyButton-Db96uwVg.js";import{l as F,S as J,A as q,a as W}from"./SpyAlertWindow-CeemW-q1.js";const Q="data:image/svg+xml,%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='64.000000pt'%20height='64.000000pt'%20viewBox='0%200%2064.000000%2064.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cg%20transform='translate(0.000000,64.000000)%20scale(0.100000,-0.100000)'%20fill='%23ffffff'%20stroke='none'%3e%3cpath%20d='M434%20621%20c-18%20-11%20-39%20-30%20-48%20-42%20-20%20-30%20-21%20-91%200%20-130%208%20-17%2014%20-32%2012%20-33%20-29%20-24%20-43%20-22%20-73%209%20-101%20108%20-267%20-15%20-199%20-147%2015%20-29%2015%20-32%20-1%20-40%20-59%20-34%20-125%20-121%20-125%20-166%200%20-11%209%20-31%2021%20-46%2020%20-26%2022%20-26%20154%20-26%20135%200%20159%206%20135%2035%20-10%2012%20-39%2015%20-132%2015%20-131%200%20-141%205%20-115%2057%2047%2089%20158%20127%20252%2084%2063%20-28%2092%20-2%2039%2036%20l-26%2019%2024%2049%20c16%2035%2033%2055%2058%2067%2042%2022%20125%2023%20160%203%2038%20-21%2070%20-19%2070%205%200%2011%20-3%2020%20-7%2020%20-5%200%20-16%207%20-26%2014%20-17%2013%20-17%2016%20-3%2045%2033%2063%208%20144%20-53%20176%20-40%2020%20-79%2019%20-117%20-4z%20m111%20-56%20c24%20-24%2031%20-57%2019%20-90%20-10%20-24%20-60%20-46%20-89%20-39%20-57%2014%20-75%2097%20-29%20133%2035%2028%2069%2026%2099%20-4z%20m-252%20-177%20c41%20-49%207%20-122%20-58%20-122%20-61%200%20-94%2060%20-64%20115%2022%2042%2089%2046%20122%207z'/%3e%3cpath%20d='M505%20228%20c-2%20-7%20-6%20-29%20-7%20-48%20-3%20-33%20-5%20-35%20-43%20-38%20-22%20-2%20-44%20-7%20-49%20-12%20-17%20-17%2015%20-40%2055%20-40%20l39%200%200%20-45%20c0%20-37%203%20-45%2019%20-45%2021%200%2031%2019%2031%2061%200%2026%203%2029%2033%2029%2041%200%2062%2013%2054%2034%20-4%2011%20-19%2016%20-47%2016%20-40%200%20-40%200%20-40%2038%200%2048%20-33%2085%20-45%2050z'/%3e%3c/g%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='64.000000pt'%20height='64.000000pt'%20viewBox='0%200%2064.000000%2064.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cg%20transform='translate(0.000000,64.000000)%20scale(0.100000,-0.100000)'%20fill='%23ffffff'%20stroke='none'%3e%3cpath%20d='M285%20511%20c-3%20-10%20-3%20-25%200%20-32%203%20-8%20-16%20-41%20-43%20-74%20-60%20-75%20-91%20-82%20-146%20-35%20-28%2025%20-34%2035%20-26%2050%2012%2023%20-10%2053%20-35%2049%20-30%20-6%20-42%20-35%20-23%20-56%208%20-10%2021%20-40%2027%20-68%207%20-27%2016%20-67%2022%20-87%20l10%20-38%20243%200%20c183%200%20246%203%20253%2012%206%207%2018%2047%2028%2088%2010%2041%2025%2083%2033%2093%2019%2021%207%2050%20-23%2056%20-25%204%20-47%20-26%20-35%20-49%208%20-15%202%20-25%20-26%20-50%20-55%20-47%20-86%20-40%20-146%2035%20-30%2036%20-46%2065%20-43%2076%209%2028%20-5%2049%20-35%2049%20-19%200%20-31%20-6%20-35%20-19z'/%3e%3cpath%20d='M70%20146%20c0%20-22%206%20-36%2016%20-40%2020%20-8%20448%20-8%20468%200%2010%204%2016%2018%2016%2040%20l0%2034%20-250%200%20-250%200%200%20-34z'/%3e%3c/g%3e%3c/svg%3e",Z="data:image/svg+xml,%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='64.000000pt'%20height='64.000000pt'%20viewBox='0%200%2064.000000%2064.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cg%20transform='translate(0.000000,64.000000)%20scale(0.100000,-0.100000)'%20fill='%23ffffff'%20stroke='none'%3e%3cpath%20d='M255%20626%20c-17%20-7%20-45%20-29%20-62%20-49%20-54%20-61%20-56%20-148%20-6%20-207%2014%20-17%2024%20-32%2022%20-34%20-2%20-1%20-25%20-14%20-50%20-29%20-57%20-33%20-105%20-85%20-135%20-151%20-31%20-66%20-30%20-100%201%20-132%2024%20-24%2026%20-24%20177%20-22%20145%203%20153%204%20153%2023%200%2019%20-8%2020%20-150%2025%20l-150%205%202%2033%20c3%2077%20100%20177%20196%20203%2057%2015%20135%206%20194%20-24%2051%20-26%2081%20-23%2070%207%20-6%2014%20-56%2050%20-82%2059%20-5%202%202%2018%2017%2036%2051%2060%2049%20146%20-5%20208%20-52%2060%20-125%2078%20-192%2049z%20m149%20-75%20c26%20-27%2031%20-39%2031%20-81%200%20-43%20-5%20-54%20-33%20-82%20-28%20-28%20-39%20-33%20-82%20-33%20-43%200%20-54%205%20-82%2033%20-28%2028%20-33%2039%20-33%2081%200%2052%2025%2092%2070%20112%2037%2016%2096%203%20129%20-30z'/%3e%3cpath%20d='M433%20194%20c-3%20-10%208%20-29%2031%20-53%20l36%20-37%20-35%20-34%20c-38%20-37%20-44%20-57%20-19%20-67%2010%20-3%2029%208%2053%2031%20l37%2036%2034%20-35%20c37%20-38%2057%20-44%2067%20-19%203%2010%20-8%2029%20-31%2053%20l-36%2037%2035%2034%20c38%2037%2044%2057%2019%2067%20-10%203%20-29%20-8%20-53%20-31%20l-37%20-36%20-34%2035%20c-37%2038%20-57%2044%20-67%2019z'/%3e%3c/g%3e%3c/svg%3e",e0={class:"user-list-item"},o0={class:"user-list-item-nickname"},t0={key:0,src:X,alt:"Host"},s0={class:"user-list-item-score"},a0={key:0,class:"user-list-item-controls"},r0={name:"UserListItem"},i0=Object.assign(r0,{props:{user:Object,isHost:Boolean},emits:["kickUser"],setup(r,{emit:e}){const u=e,s=r;return(t,a)=>(i(),l("div",e0,[n("div",o0,[x(w(s.user.user.username)+" ",1),s.user.isHost?(i(),l("img",t0)):y("",!0)]),n("div",s0,w(s.user.score),1),s.isHost&&!s.user.isHost?(i(),l("div",a0,[n("img",{src:Z,alt:"Kick",onClick:a[0]||(a[0]=c=>u("kickUser",s.user.user._id))})])):y("",!0)]))}}),n0=D(i0,[["__scopeId","data-v-ee764eb1"]]),c0={class:"user-list"},l0={name:"UserList"},m0=Object.assign(l0,{props:{userList:Array,isHost:Boolean},emits:["kickUser"],setup(r,{emit:e}){const u=e,s=r;return(t,a)=>(i(),l("div",c0,[v(U,{name:"user-list"},{default:B(()=>[(i(!0),l(G,null,C(s.userList,c=>(i(),z(n0,{user:c,key:c._id,"is-host":s.isHost,onKickUser:a[0]||(a[0]=_=>{u("kickUser",_)})},null,8,["user","is-host"]))),128))]),_:1})]))}}),d0=D(m0,[["__scopeId","data-v-ab5e8407"]]),u0="data:image/svg+xml,%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='64.000000pt'%20height='64.000000pt'%20viewBox='0%200%2064.000000%2064.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cg%20transform='translate(0.000000,64.000000)%20scale(0.100000,-0.100000)'%20%3e%3cpath%20fill='%23ffffff'%20d='M10%20485%20c-7%20-8%20-10%20-25%20-7%20-37%2010%20-36%20289%20-308%20317%20-308%2028%200%20307%20272%20317%20308%203%2012%200%2029%20-7%2037%20-27%2032%20-54%2016%20-182%20-112%20l-128%20-128%20-128%20128%20c-128%20128%20-155%20144%20-182%20112z'/%3e%3c/g%3e%3c/svg%3e",p0=r=>(b("data-v-71bca92b"),r=r(),M(),r),v0={class:"spy-dropdown"},_0=p0(()=>n("img",{src:u0,alt:"Down arrow"},null,-1)),g0={class:"spy-dropdown-container-options"},h0=["onClick"],f0={name:"SpyDropdown"},w0=Object.assign(f0,{props:{dropdownOptions:Array},emits:["optionSelect"],setup(r,{emit:e}){const u=e,s=r,t=d(!1),a=d({});return j(()=>{setTimeout(()=>{a.value=s.dropdownOptions[0]},500)}),E(a,c=>{u("optionSelect",c)}),(c,_)=>(i(),l("div",v0,[n("div",{class:S(["spy-dropdown-header",{"dropdown-open-header":t.value}]),onClick:_[0]||(_[0]=m=>t.value=!t.value)},[x(w(a.value.name)+" ",1),_0],2),n("div",{class:S(["spy-dropdown-container",{"dropdown-open":t.value}])},[n("div",g0,[v(U,{name:"spy-dropdown-options"},{default:B(()=>[(i(!0),l(G,null,C(s.dropdownOptions,m=>(i(),l("div",{class:"spy-dropdown-container-options-item",onClick:k=>{a.value=m,t.value=!t.value},key:m._id},w(m.name),9,h0))),128))]),_:1})])],2)]))}}),k0=D(w0,[["__scopeId","data-v-71bca92b"]]),I0=r=>(b("data-v-73208771"),r=r(),M(),r),y0={class:"room-controls"},$0={class:"room-controls-time"},D0=I0(()=>n("div",{class:"room-controls-time-title"},"Round time",-1)),R0={class:"room-controls-time-inputs"},x0={key:0,class:"room-controls-error"},S0={name:"RoomControls"},b0=Object.assign(S0,{setup(r){const e=T();H();const u=O(),s=L("$cookies"),t=d("10"),a=d(!1),c=d({}),_=d([]),m=d("");async function k(){a.value&&(t.value=""),e.dispatch("room/startGame",{roomID:u.params.id,collectionID:c.value._id,endless:a.value,time:t.value}).then(async p=>{m.value="",s.set("gameID",p.data.room.currentGame),e.commit("room/setGame",p.data.room.currentGame)}).catch(p=>{m.value=p.response.data.message})}return j(()=>{F.getCollections().then(p=>{_.value=p.data.collections}).catch(p=>{console.log(p)})}),(p,h)=>(i(),l("div",y0,[n("div",$0,[D0,n("div",R0,[v(A,{class:S({disabled:a.value}),"spy-placeholder":"Round time...","pre-value":t.value,onDataInput:h[0]||(h[0]=$=>{t.value=$})},null,8,["class","spy-placeholder","pre-value"]),v(J,{option:{name:"Till guess",checked:a.value},onSelected:h[1]||(h[1]=()=>{a.value=!a.value})},null,8,["option"])])]),v(k0,{"dropdown-options":_.value,onOptionSelect:h[2]||(h[2]=$=>{c.value=$})},null,8,["dropdown-options"]),m.value?(i(),l("div",x0,w(m.value),1)):y("",!0),v(N,{content:"Start Game",onButtonClick:k})]))}}),M0=D(b0,[["__scopeId","data-v-73208771"]]),P=r=>(b("data-v-d59d703e"),r=r(),M(),r),B0={class:"room-page"},G0={class:"room-page-title"},C0={class:"room-page-title-id"},U0={key:0,class:"room-page-member"},z0={key:0,class:"room-page-member-announcement"},j0=P(()=>n("img",{src:Q,alt:"Invite"},null,-1)),H0={class:"room-page-member-controls"},O0={key:1,class:"room-page-guest"},A0=P(()=>n("div",{class:"room-page-guest-header"},"Join this room!",-1)),T0={key:0,class:"room-page-guest-error"},L0={name:"RoomPage"},N0=Object.assign(L0,{setup(r){const e=T(),u=H(),s=O(),t=L("$cookies"),a=d(!1),c=d(!0),_=d(""),m=d(""),k=d(""),p=d([]);async function h(){e.dispatch("room/joinRoom",{roomID:s.params.id,userID:e.state.user._id,password:_.value}).then(o=>{t.set("roomID",o.data.roomID),e.commit("user/joinRoom",o.data.roomID),R()}).catch(o=>{m.value=o.response.data.error.message})}async function $(){await e.commit("user/leaveRoom"),await e.dispatch("room/leaveRoom",{roomID:t.get("roomID"),userID:e.state.user._id}),t.remove("roomID"),t.remove("gameID"),await u.push("/")}function Y(o){e.dispatch("room/kickUser",{roomID:s.params.id,userID:o}).then().catch(g=>{console.log(g)})}async function R(){e.getters["user/isInRoom"]&&setTimeout(()=>{e.dispatch("room/getRoom",e.state.room._id).then(async o=>{if(o.data.room){let g=!1;if(o.data.room.users.forEach(f=>{f.user._id===e.state.user._id&&(g=!0)}),g)if(await e.commit("room/setID",o.data.room._id),await e.commit("room/setUsers",o.data.room.users),o.data.room.currentGame){t.set("gameID",o.data.room.currentGame._id),e.commit("room/setGame",o.data.room.currentGame._id);let f=!1;o.data.room.currentGame.users.forEach(V=>{V.user._id===e.state.user._id&&(f=!0)}),f?await u.push(`/game/${o.data.room.currentGame._id}`):await R()}else await R();else c.value=!1,e.commit("user/leaveRoom"),t.remove("roomID"),t.remove("gameID"),k.value="You were kicked",setTimeout(()=>{c.value=!0,u.push("/")},750)}else c.value=!1,e.commit("user/leaveRoom"),e.commit("room/leaveRoom"),t.remove("roomID"),t.remove("gameID"),k.value="Host closed room",setTimeout(()=>{c.value=!0,u.push("/")},750)}).catch(o=>{console.log(o)})},2500)}return K(async()=>{e.dispatch("room/getRoom",s.params.id).then(o=>{o.data.room?(e.commit("room/setID",o.data.room._id),e.commit("room/setUsers",o.data.room.users),e.getters["room/getHostID"]===e.state.user._id&&(a.value=!0),R()):console.log("No room")}).catch(o=>{console.log(o)})}),(o,g)=>(i(),l("div",B0,[n("div",G0,[x("Room "),n("span",C0,w(I(s).params.id),1)]),I(e).state.user.roomID===I(s).params.id?(i(),l("div",U0,[I(e).getters["room/roomInGame"]?(i(),l("div",z0,"Room currently in game")):y("",!0),n("div",{class:"room-page-member-invite",onClick:g[0]||(g[0]=f=>{o.navigator.clipboard.writeText(`https://f1anderz.github.io/SpyGame/${I(s).fullPath}`)})},[x("Invite friends to room"),j0]),v(d0,{"user-list":I(e).state.room.users,"is-host":a.value,onKickUser:Y},null,8,["user-list","is-host"]),n("div",H0,[v(W,{content:"Leave room",onButtonClick:$})]),a.value?(i(),z(M0,{key:1,collections:p.value},null,8,["collections"])):y("",!0)])):(i(),l("div",O0,[A0,m.value?(i(),l("div",T0,w(m.value),1)):y("",!0),v(A,{"spy-placeholder":"Room password...",onDataInput:g[1]||(g[1]=f=>{_.value=f})},null,8,["spy-placeholder"]),v(N,{content:"Join Room",onButtonClick:h})])),v(q,{message:k.value,"is-hidden":c.value},null,8,["message","is-hidden"])]))}}),E0=D(N0,[["__scopeId","data-v-d59d703e"]]);export{E0 as default};
