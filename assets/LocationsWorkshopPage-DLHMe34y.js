import{S as B,l as h,a as I,A}from"./SpyAlertWindow-YpE4JPuc.js";import{_ as v,o as s,c as i,t as S,b as d,w as $,F as y,k,f,T as C,r as g,a as c,g as b,l as N,S as M,m as T,p as O,h as x,n as F,i as j}from"./index-D7cZbWx5.js";const V={class:"location"},D={name:"Location"},E=Object.assign(D,{props:{location:Object},setup(t){const n=t;return(e,o)=>(s(),i("div",V,S(n.location.name),1))}}),P=v(E,[["__scopeId","data-v-229c55cc"]]),W={class:"list-locations"},G={name:"ListLocations"},H=Object.assign(G,{props:{locations:Array},setup(t){return(n,e)=>(s(),i("div",W,[d(C,{name:"list-locations"},{default:$(()=>[(s(!0),i(y,null,k(t.locations,o=>(s(),f(P,{location:o,key:o._id},null,8,["location"]))),128))]),_:1})]))}}),q=v(H,[["__scopeId","data-v-ce186e65"]]),z={class:"locations-collection"},J={class:"locations-collection-locations"},K={name:"LocationsCollection"},Q=Object.assign(K,{props:{collection:Object},setup(t){const n=t,e=g(!1);return(o,l)=>(s(),i("div",z,[c("div",{class:"locations-collection-name",onClick:l[0]||(l[0]=_=>e.value=!e.value)},S(n.collection.name),1),c("div",J,[e.value?(s(),f(q,{key:0,locations:n.collection.locations},null,8,["locations"])):b("",!0)])]))}}),R=v(Q,[["__scopeId","data-v-83662ebc"]]),U={class:"list-locations-collections"},X={name:"ListLocationsCollections"},Y=Object.assign(X,{props:{collections:Array},setup(t){const n=t;return(e,o)=>(s(),i("div",U,[d(C,{name:"collections-list"},{default:$(()=>[(s(!0),i(y,null,k(n.collections,l=>(s(),f(R,{collection:l,key:l._id},null,8,["collection"]))),128))]),_:1})]))}}),Z=v(Y,[["__scopeId","data-v-339f123c"]]),tt={class:"spy-select-list"},ot={class:"spy-select-list-header"},et={class:"spy-select-list-options"},st={name:"SpySelectList"},nt=Object.assign(st,{props:{selectListOptions:Object},emits:["optionSelect"],setup(t,{emit:n}){const e=n,o=t;return(l,_)=>(s(),i("div",tt,[c("div",ot,S(o.selectListOptions.header),1),c("div",et,[d(C,{name:"spy-select-list-options"},{default:$(()=>[(s(!0),i(y,null,k(o.selectListOptions.list,r=>(s(),f(B,{key:r._id,option:r,onSelected:_[0]||(_[0]=u=>{e("optionSelect",u)})},null,8,["option"]))),128))]),_:1})])]))}}),ct=v(nt,[["__scopeId","data-v-274741ee"]]),lt=t=>(O("data-v-57249043"),t=t(),x(),t),at={class:"suggest-page"},it={class:"suggest-page-form"},rt=lt(()=>c("div",{class:"suggest-page-form-header"},"Suggest new content",-1)),dt={key:0,class:"suggest-page-form-location"},ut={key:1,class:"suggest-page-form-collection"},pt={name:"SuggestForm"},_t=Object.assign(pt,{props:{formMode:String},emits:["suggestion"],setup(t,{emit:n}){const e=n,o=t,l=g(""),_=g(""),r=g({});function u(){if(o.formMode==="L")h.postLocation(l.value);else if(o.formMode==="C"){let p=r.value.list.filter(a=>a.selected===!0);h.postCollection({name:_.value,locations:p})}e("suggestion")}function m(p){r.value.list.forEach(a=>{a._id===p._id&&(a.selected=!a.selected)})}return N(()=>{o.formMode==="C"&&h.getLocations().then(p=>{r.value.list=p.data.locations,r.value.header="Locations",r.value.list.forEach(a=>{a.selected=!1})}).catch(p=>{console.log(p)})}),(p,a)=>(s(),i("div",at,[c("div",it,[rt,o.formMode==="L"?(s(),i("div",dt,[d(M,{"spy-placeholder":"Location name...",onDataInput:a[0]||(a[0]=L=>{l.value=L})},null,8,["spy-placeholder"])])):o.formMode==="C"?(s(),i("div",ut,[d(M,{"spy-placeholder":"Collection name...",onDataInput:a[1]||(a[1]=L=>{_.value=L})},null,8,["spy-placeholder"]),d(ct,{"select-list-options":r.value,onOptionSelect:m},null,8,["select-list-options"])])):b("",!0),d(T,{"adapt-value":["Suggest Location","Suggest Collection"],"adapt-property":t.formMode==="L",onAdaptiveClick:u},null,8,["adapt-property"])])]))}}),gt=v(_t,[["__scopeId","data-v-57249043"]]),w=t=>(O("data-v-ec90f18b"),t=t(),x(),t),vt={class:"locations-page-controls"},mt=w(()=>c("div",{class:"locations-page-controls-header"},[j("Suggest "),c("span",{class:"highlight"},"new content")],-1)),ft={class:"locations-page-controls-content"},ht={class:"locations-page-collections"},Lt=w(()=>c("div",{class:"locations-page-collections-header"},[j("Available "),c("span",{class:"highlight"},"collections")],-1)),St={name:"LocationsWorkshopPage"},$t=Object.assign(St,{setup(t){const n=g([]),e=g(""),o=g(!0),l=g("");function _(u){u.target.classList[0]==="suggest-page"&&(e.value="")}function r(){l.value="Thank you for suggestion !",o.value=!1,setTimeout(()=>{o.value=!0},750),e.value=""}return F(()=>{h.getCollections().then(u=>{n.value=u.data.collections}).catch(u=>{console.log(u)})}),(u,m)=>(s(),i("div",{class:"locations-page",onClick:_},[c("div",vt,[mt,c("div",ft,[d(I,{content:"New Collection",onButtonClick:m[0]||(m[0]=p=>e.value="C")}),d(I,{content:"New Location",onButtonClick:m[1]||(m[1]=p=>e.value="L")})])]),c("div",ht,[Lt,d(Z,{collections:n.value},null,8,["collections"])]),e.value?(s(),f(gt,{key:0,"form-mode":e.value,onSuggestion:r},null,8,["form-mode"])):b("",!0),d(A,{"is-hidden":o.value,message:l.value},null,8,["is-hidden","message"])]))}}),Ct=v($t,[["__scopeId","data-v-ec90f18b"]]);export{Ct as default};
